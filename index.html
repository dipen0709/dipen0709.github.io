<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Team Divider</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      font-size: 12px;
      margin: 10px;
      background-color: #f9f9f9;
      color: #333;
    }
    h2 {
      color: #1e90ff;
      font-size: 14px;
      margin: 10px 0 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .player-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
      gap: 4px;
      margin-bottom: 10px;
    }
    .player-item {
      background: #fff;
      padding: 4px 6px;
      border-radius: 6px;
      border: 1px solid #ddd;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 11px;
    }
    .player-item label {
      flex: 1;
      margin-left: 4px;
    }
    .player-item input[type="checkbox"] {
      margin-right: 4px;
      transform: scale(0.9);
    }
    .edit-btn {
      background: #e0e5e6;
      color: white;
      border: none;
      border-radius: 3px;
      font-size: 10px;
      padding: 1px 4px;
      cursor: pointer;
    }
    .teams {
      display: flex;
      flex-direction: row;
      gap: 8px;
    }
    .team {
      background-color: #fff;
      padding: 6px 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 12px;
      flex: 1;
    }
    .teamA { border-left: 3px solid #28a745; }
    .teamB { border-left: 3px solid #dc3545; }
    .score {
      font-weight: bold;
      font-size: 11px;
      color: #666;
    }
    ul {
      margin: 4px 0;
      padding-left: 15px;
    }
    li {
      margin: 2px 0;
    }
    .refresh-btn {
      margin-bottom: 10px;
      background: #e0cde7;
      color: #000;
      border: none;
      padding: 6px 10px;
      font-size: 12px;
      border-radius: 6px;
      cursor: pointer;
    }
    .weight-info {
      margin: 8px 0 6px;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .weight-info span {
      font-weight: bold;
    }
    .weight-info button {
      background: #e0e5e6;
      color: white;
      border: none;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 11px;
      cursor: pointer;
    }
    .weight-text {
      color: #007bff;
    }
    .plus-btn {
      background: #0c7424;
      color: white;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <h2>
    Aristo Aalayam
    <button class="plus-btn" onclick="addNewPlayer()">+</button>
  </h2>
  <div class="player-list" id="playerList"></div>

  <div class="weight-info">
    <span><span class="weight-text" id="batW">Bat: 1.00</span>, <span class="weight-text" id="bowlW">Bowl: 0.85</span>, <span class="weight-text" id="fieldW">Field: 0.70</span></span>
    <button onclick="editWeights()">&nbsp ‚úèÔ∏è &nbsp</button>
  </div>

  <button class="refresh-btn" onclick="rebalanceTeams()">üîÑ Refresh Teams</button>

  <div class="teams">
    <div class="team teamA">
      <h2>Team A</h2>
      <ul id="teamAList"></ul>
      <p class="score">Total Score: <span id="scoreA">0</span></p>
    </div>
    <div class="team teamB">
      <h2>Team B</h2>
      <ul id="teamBList"></ul>
      <p class="score">Total Score: <span id="scoreB">0</span></p>
    </div>
  </div>

  <script>
    let weights = { batsman: 1, bowler: 0.85, fielder: 0.7 };

    let PLAYER_MASTER = [
      { id: 1, data: ["Dipen", 10, 9, 9] },
      { id: 2, data: ["Vivek", 10, 9, 9] },
      { id: 3, data: ["Dhruv", 9, 8, 9] },
      { id: 4, data: ["Prakshal", 9, 8, 8] },
      { id: 5, data: ["Ayush", 8, 9, 9] },
      { id: 6, data: ["Punyesh", 8, 8, 10] },
      { id: 7, data: ["Dhaval", 8, 9, 7] },
      { id: 8, data: ["Sanyam", 8, 8, 8] },
      { id: 9, data: ["Nisarg", 7, 8, 8] },
      { id: 10, data: ["Keval", 7, 8, 8] },
      { id: 11, data: ["Akash", 6, 9, 5] },
      { id: 12, data: ["Mihir", 7, 7, 9] },
      { id: 13, data: ["Nayan", 6, 7, 8] },
      { id: 14, data: ["Pratik", 6, 8, 8] },
      { id: 15, data: ["Yug", 7, 7, 8] },
      { id: 16, data: ["Bhavesh", 6, 5, 7] },
      { id: 17, data: ["Shubham", 6, 6, 7] },
      { id: 18, data: ["Deval", 6, 6, 6] },
      { id: 19, data: ["Jaymin", 6, 7, 7] },
      { id: 20, data: ["Bharat", 6, 4, 5] },
      { id: 21, data: ["Amit", 5, 6, 6] },
      { id: 22, data: ["Harsh", 5, 4, 5] },
      { id: 23, data: ["Kishan", 4, 0, 6] },
      { id: 24, data: ["Priyank", 4, 0, 6] },
      { id: 25, data: ["Meet", 3, 0, 4] },
    ];

    function updateWeightDisplay() {
      document.getElementById("batW").textContent = `Bat: ${weights.batsman.toFixed(2)}`;
      document.getElementById("bowlW").textContent = `Bowl: ${weights.bowler.toFixed(2)}`;
      document.getElementById("fieldW").textContent = `Field: ${weights.fielder.toFixed(2)}`;
    }

    function editWeights() {
      const input = prompt("Enter new weights for Batting, Bowling, and Fielding (comma separated):", `${weights.batsman},${weights.bowler},${weights.fielder}`);
      const [newBat, newBowl, newField] = input.split(",").map(val => parseFloat(val.trim()));

      if (!isNaN(newBat)) weights.batsman = newBat;
      if (!isNaN(newBowl)) weights.bowler = newBowl;
      if (!isNaN(newField)) weights.fielder = newField;

      updateWeightDisplay();
      updateTeams();
    }

    function addNewPlayer() {
      const playerName = prompt("Enter player name:");
      if (!playerName) return;

      const battingScore = parseInt(prompt("Enter batting score (0‚Äì10):"));
      const bowlingScore = parseInt(prompt("Enter bowling score (0‚Äì10):"));
      const fieldingScore = parseInt(prompt("Enter fielding score (0‚Äì10):"));

      if (isNaN(battingScore) || isNaN(bowlingScore) || isNaN(fieldingScore)) {
        alert("Invalid input. Please enter valid scores.");
        return;
      }

      const newId = PLAYER_MASTER.length + 1;
      PLAYER_MASTER.push({
        id: newId,
        data: [playerName, battingScore, bowlingScore, fieldingScore],
      });

      renderPlayerList(); // Re-render player list with the new player
      updateTeams(); // Recalculate and update the teams
    }

    function renderPlayerList() {
      const playerListDiv = document.getElementById("playerList");
      playerListDiv.innerHTML = '';  // Clear existing list

      PLAYER_MASTER.forEach((p) => {
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = p.id;
        checkbox.addEventListener("change", () => rebalanceTeams());

        const label = document.createElement("label");
        label.htmlFor = p.id;
        label.textContent = `${p.data[0]} (${p.data[1]},${p.data[2]},${p.data[3]})`;

        const button = document.createElement("button");
        button.classList.add("edit-btn");
        button.textContent = "‚úèÔ∏è";
        button.onclick = () => editPlayer(p.id);

        const playerItem = document.createElement("div");
        playerItem.classList.add("player-item");
        playerItem.appendChild(checkbox);
        playerItem.appendChild(label);
        playerItem.appendChild(button);

        playerListDiv.appendChild(playerItem);
      });
    }

    function editPlayer(playerId) {
      const player = PLAYER_MASTER.find((p) => p.id === playerId);
      const newBat = prompt("Edit Batting Score:", player.data[1]);
      const newBowl = prompt("Edit Bowling Score:", player.data[2]);
      const newField = prompt("Edit Fielding Score:", player.data[3]);

      if (newBat !== null) player.data[1] = parseInt(newBat);
      if (newBowl !== null) player.data[2] = parseInt(newBowl);
      if (newField !== null) player.data[3] = parseInt(newField);

      renderPlayerList(); // Re-render the player list with updated data
    }


    function rebalanceTeams() {
      const teamA = [];
      const teamB = [];
      let scoreA = 0;
      let scoreB = 0;
 

      PLAYER_MASTER.forEach((player, index) => {
        const checkbox = document.getElementById(player.id);
        if (checkbox.checked) {
          if (index % 2 === 0) {
            teamA.push(player);
            scoreA += player.data[1] * weights.batsman + player.data[2] * weights.bowler + player.data[3] * weights.fielder;
          } else {
            teamB.push(player);
            scoreB += player.data[1] * weights.batsman + player.data[2] * weights.bowler + player.data[3] * weights.fielder;
          }
        }
      });

      if(teamA.length != teamB.length){
        teamAList.innerHTML = '';
        teamBList.innerHTML = '';
        return;
      }

      renderTeams(teamA, teamB, scoreA, scoreB);
    }

    function renderTeams(teamA, teamB, scoreA, scoreB) {
      const teamAList = document.getElementById("teamAList");
      const teamBList = document.getElementById("teamBList");

      teamAList.innerHTML = '';
      teamBList.innerHTML = '';

      teamA.forEach((player) => {
        const li = document.createElement("li");
        li.textContent = `${player.data[0]} - Score: ${(player.data[1] * weights.batsman + player.data[2] * weights.bowler + player.data[3] * weights.fielder).toFixed(2)}`;
        teamAList.appendChild(li);
      });

      teamB.forEach((player) => {
        const li = document.createElement("li");
        li.textContent = `${player.data[0]} - Score: ${(player.data[1] * weights.batsman + player.data[2] * weights.bowler + player.data[3] * weights.fielder).toFixed(2)}`;
        teamBList.appendChild(li);
      });

      document.getElementById("scoreA").textContent = scoreA.toFixed(2);
      document.getElementById("scoreB").textContent = scoreB.toFixed(2);
    }

    renderPlayerList(); // Initial rendering
  </script>
</body>
</html>
